<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel 2D Pribadi</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1a1a1a; color: #eee; padding: 20px; text-align: center; }
        .menu-tombol { margin-bottom: 30px; display: flex; justify-content: center; gap: 10px; }
        button { padding: 12px 25px; cursor: pointer; border: none; border-radius: 5px; background: #333; color: white; font-weight: bold; transition: 0.3s; }
        button:hover { background: #555; }
        button.active { background: #d9534f; box-shadow: 0 0 10px rgba(217, 83, 79, 0.5); }
        
        .container { display: flex; justify-content: center; }
        .card { background: #222; padding: 20px; border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.5); width: 100%; max-width: 400px; }
        h2 { color: #d9534f; margin-top: 0; text-transform: uppercase; letter-spacing: 2px; }
        
        .grid-2d { 
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            gap: 10px; 
            max-height: 500px; 
            overflow-y: auto; 
            padding: 10px;
        }
        .item-2d { 
            background: #333; 
            padding: 10px; 
            border-radius: 5px; 
            font-size: 1.5em; 
            font-weight: bold; 
            color: #fff;
            border: 1px solid #444;
        }
        /* Style scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }
    </style>
</head>
<body>

    <h1>REKAP 2D TERAKHIR</h1>

    <div class="menu-tombol">
        <button onclick="pilihPasaran('hk', this)">HONGKONG</button>
        <button onclick="pilihPasaran('sdy', this)">SYDNEY</button>
        <button onclick="pilihPasaran('sgp', this)">SINGAPORE</button>
    </div>

    <div class="container">
        <div class="card">
            <h2 id="judul-pasaran">Pilih Pasaran</h2>
            <div id="display-2d" class="grid-2d">
                </div>
        </div>
    </div>

    <script>
        const username = "Mahasewa";
        const repo = "mesin-bbfs";

        async function pilihPasaran(pasaran, btn) {
            // Ubah tampilan tombol aktif
            const tombols = document.querySelectorAll('button');
            tombols.forEach(t => t.classList.remove('active'));
            btn.classList.add('active');

            const judul = document.getElementById('judul-pasaran');
            const display = document.getElementById('display-2d');
            
            judul.innerText = "Loading " + pasaran.toUpperCase() + "...";
            display.innerHTML = "";

            const fileName = `data_keluaran_${pasaran}.txt`;
            const url = `https://raw.githubusercontent.com/${username}/${repo}/main/${fileName}`;

            try {
                const response = await fetch(url);
                const data = await response.text();
                const baris = data.trim().split("\n");
                
                // Ambil 100 baris terakhir, balik urutan
                const barisTerakhir = baris.slice(-100).reverse();
                
                judul.innerText = pasaran.toUpperCase();
                
                let html = "";
                barisTerakhir.forEach(angka => {
                    let clean = angka.trim();
                    if(clean.length >= 2) {
                        // Ambil 2D saja
                        const duaD = clean.slice(-2);
                        html += `<div class="item-2d">${duaD}</div>`;
                    }
                });
                display.innerHTML = html;
            } catch (error) {
                judul.innerText = "Gagal Load Data";
                display.innerHTML = "Pastikan file " + fileName + " sudah ada.";
            }
        }
    </script>
</body>
</html>
